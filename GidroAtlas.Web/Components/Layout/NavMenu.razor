@inject IJSRuntime JS

<MudNavMenu>
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Главная</MudNavLink>
    <MudNavLink Href="Map" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Map">Карта</MudNavLink>
    @if (isAdmin)
    {
        <MudNavLink Href="dashboard" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Dashboard" IconColor="Color.Primary">Дашборд</MudNavLink>
    }
</MudNavMenu>

@code {
    private bool isAdmin = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                var role = await JS.InvokeAsync<string>("localStorage.getItem", "userRole");
                if (role == "Expert")
                {
                    isAdmin = true;
                    StateHasChanged();
                }
            }
            catch { /* ignore */ }
        }
    }
}
