@inject IJSRuntime JS

<MudNavLink Href="Map" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Map">Карта</MudNavLink>
    @if (isAdmin)
    {
        <MudNavGroup Title="Дашборд" Icon="@Icons.Material.Filled.Dashboard" Expanded="true">
            <MudNavLink Href="dashboard/resources" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Water">Водные ресурсы</MudNavLink>
            <MudNavLink Href="dashboard/structures" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Construction">Сооружения</MudNavLink>
        </MudNavGroup>
    }

@code {
    private bool isAdmin = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            try
            {
                var role = await JS.InvokeAsync<string>("localStorage.getItem", "userRole");
                if (role == "Expert")
                {
                    isAdmin = true;
                    StateHasChanged();
                }
            }
            catch { /* ignore */ }
        }
    }
}
